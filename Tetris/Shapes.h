const byte rotations[7] = { 2, 4, 4, 1, 2, 4, 2 };

// Precompute all rotations for each shape
const byte shapes[7][4][4][4] = {
  // I shape
  { {B0001, B0001, B0001, B0001}, {B0000, B0000, B1111, B0000}, {B0001, B0001, B0001, B0001}, {B0000, B0000, B1111, B0000} },
  // J shape
  { {B0000, B0001, B0001, B0011}, {B0000, B0000, B0100, B0111}, {B0000, B0110, B0100, B0100}, {B0000, B0000, B0111, B0001} },
  // L shape
  { {B0000, B0010, B0010, B0011}, {B0000, B0000, B0111, B0100}, {B0000, B0110, B0010, B0010}, {B0000, B0000, B0001, B0111} },
  // D shape
  { {B0000, B0000, B0011, B0011} },
  // S shape
  { {B0000, B0000, B0011, B0110}, {B0000, B0100, B0110, B0010}, {B0000, B0000, B0011, B0110}, {B0000, B0100, B0110, B0010} },
  // T shape
  { {B0000, B0000, B0010, B0111}, {B0000, B0100, B0110, B0100}, {B0000, B0000, B0111, B0010}, {B0000, B0010, B0110, B0010} },
  // Z shape
  { {B0000, B0000, B0110, B0011}, {B0000, B0010, B0110, B0100}, {B0000, B0000, B0110, B0011}, {B0000, B0010, B0110, B0100} }
};
